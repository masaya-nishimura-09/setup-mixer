# オフィスグッズセット作成サービス - 要件定義書

## 1. プロジェクト概要

### 1.1 サービス名

オフィスグッズセット作成サービス（仮名: Setup Mixer）

### 1.2 サービスの目的

ユーザーが好みの条件（色、雰囲気、部屋の広さなど）に基づいて、統一感のあるオフィスグッズセットを作成し、まとめて購入できるサービス

### 1.3 ターゲットユーザー

- リモートワーク環境を整えたい人
- 統一感のあるオフィス空間を作りたい人
- オフィスグッズ選びに時間をかけたくない人

---

## 2. 機能要件

### 2.1 検索機能（MVP）

#### 2.1.1 キーワード検索

- **機能**: 複数のキーワードを組み合わせて検索
- **例**: "白 おしゃれな 狭い"、"黒 ミニマル"、"木製 北欧"
- **実装方法**:
  - スペース区切りで複数キーワードを受け取る
  - 各キーワードを商品の属性（色、スタイル、素材など）とマッチング

#### 2.1.2 フィルター検索（将来拡張）

- 色（白、黒、木製など）
- 部屋の広さ（狭い、広い）
- 雰囲気（おしゃれ、ミニマル、北欧など）
- 系統（北欧、ミニマル、モダンなど）

### 2.2 アイテムカテゴリ管理

#### 2.2.1 カテゴリ一覧（MVP）

1. 机
2. 椅子
3. キーボード
4. モニター
5. モニター台
6. マウス
7. マウスパッド
8. マット
9. ライト
10. ケーブル類
11. スピーカー
12. カメラ
13. マイク
14. ヘッドホン

#### 2.2.2 カテゴリ表示

- 各カテゴリごとに商品一覧を表示
- カテゴリごとにフィルタリング可能

### 2.3 商品カード表示

#### 2.3.1 表示項目（MVP）

- **画像**: 商品のメイン画像
- **価格**: 商品価格（税込/税抜要確認）
- **短い説明**: 商品の特徴を簡潔に（100 文字程度）
- **Amazon レビューまとめ**:
  - 平均評価（★ 表示）
  - レビュー件数
  - 既存データ（Amazon API 等）から取得
- **アフィリエイトリンク**: 購入ページへのリンク

#### 2.3.2 商品詳細（将来拡張）

- 詳細説明
- 複数画像
- スペック情報
- レビュー詳細

### 2.4 セット作成機能

#### 2.4.1 セット内容の自動提案（MVP）

- **機能**: 選択した条件に基づいて、複数カテゴリの商品を組み合わせて提案
- **例**: 椅子 × 机 × キーボード
- **最適化条件**:
  - 同系色で統一
  - スタイルの統一（北欧 × 北欧、ミニマル × ミニマルなど）
  - 価格帯のバランス

#### 2.4.2 手動セット作成

- ユーザーが各カテゴリから商品を選択
- セットに追加/削除
- セットの保存（将来拡張: アカウント機能）

#### 2.4.3 セット表示

- 選択した商品の一覧表示
- 合計金額の表示
- セット全体の統一感の可視化

### 2.5 一覧表示機能

#### 2.5.1 表示モード（MVP）

- **一覧表示**: グリッド形式で商品を表示
- **人気順**: レビュー数や評価に基づくソート
- **カラー順**: 色でグループ化して表示

#### 2.5.2 ソート機能（将来拡張）

- 価格順（安い順/高い順）
- 新着順
- 評価順

### 2.6 購入機能（MVP）

- セットに含まれる全商品のアフィリエイトリンクをまとめて表示
- 各商品の購入ページへの遷移
- まとめてカートに追加（Amazon API 利用可能か要確認）

---

## 3. 非機能要件

### 3.1 パフォーマンス

- ページ読み込み時間: 3 秒以内
- 検索結果表示: 1 秒以内

### 3.2 レスポンシブデザイン

- PC（デスクトップ）
- タブレット
- スマートフォン

### 3.3 ブラウザ対応

- Chrome（最新版）
- Safari（最新版）
- Firefox（最新版）
- Edge（最新版）

### 3.4 データソース

- Amazon 商品データ（API またはスクレイピング）
- レビューデータの取得方法要検討

---

## 4. データモデル（案）

### 4.1 商品（Product）

```
- id: 一意のID
- name: 商品名
- category: カテゴリ（机、椅子など）
- price: 価格
- imageUrl: 画像URL
- description: 説明
- color: 色（白、黒、木製など）
- style: スタイル（北欧、ミニマルなど）
- roomSize: 部屋の広さ適性（狭い、広い）
- amazonUrl: Amazon商品URL
- affiliateUrl: アフィリエイトリンク
- reviewAverage: 平均評価（★）
- reviewCount: レビュー件数
- tags: タグ配列（検索用）
```

### 4.2 セット（Set）

```
- id: 一意のID
- name: セット名（ユーザーが命名、将来拡張）
- products: 商品IDの配列
- totalPrice: 合計金額
- createdAt: 作成日時
```

### 4.3 カテゴリ（Category）

```
- id: 一意のID
- name: カテゴリ名
- displayOrder: 表示順序
```

---

## 5. UI/UX 要件

### 5.1 トップページ

- 検索バー（キーワード入力）
- 人気のセット表示（将来拡張）
- カテゴリ一覧

### 5.2 検索結果ページ

- フィルターサイドバー（将来拡張）
- 商品一覧（グリッド表示）
- ソート機能
- ページネーション

### 5.3 セット作成ページ

- カテゴリごとの商品選択エリア
- 選択したセットのプレビュー
- 合計金額表示
- 購入ボタン

### 5.4 デザイン方針

- ミニマルで洗練されたデザイン
- 白を基調とした配色
- 商品画像を際立たせるレイアウト

---

## 6. 技術スタック（決定）

### 6.1 フロントエンド

- **フレームワーク**: **Next.js 14+（App Router）** ✅ 決定
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand または React Context
- **UI コンポーネント**: shadcn/ui または MUI

### 6.2 バックエンド

- **API**: Next.js API Routes（フルスタック構成）
- **データベース**: PostgreSQL（Supabase または Railway）
- **ORM**: Prisma

### 6.3 外部サービス

- **主要データソース**: **楽天市場 API** ✅ Phase 1 で使用
- **将来追加**: Amazon Product Advertising API（Phase 2 以降、実績ができた時点）
- **画像ストレージ**: Cloudinary または AWS S3（必要に応じて）

### 6.4 デプロイ

- **フロントエンド + バックエンド**: Vercel（Next.js のデプロイに最適）
- **データベース**: Supabase または Railway

### 6.5 データ取得戦略

**Phase 1（MVP）:**

- 楽天市場 API で商品データを取得
- サンプルデータを JSON ファイルに保存
- プロトタイプの開発に使用

**Phase 2 以降:**

- 楽天アフィリエイトプログラムに参加
- Amazon アソシエイトプログラムに参加（実績ができた時点）
- Amazon PA-API の利用を検討（十分な実績ができた時点）

**詳細は `amazon-api-research.md` を参照**

---

## 7. 開発フェーズ

### Phase 1: MVP（最小限の機能）

1. キーワード検索機能
2. 商品カード一覧表示（14 カテゴリ）（人気順、価格順）
3. 基本的なセット作成機能(状態管理、合計金額を表示,写真を並べる)
4. それぞれのアフィリエイトリンク表示

### Phase 2: 機能拡張

1. フィルター検索の追加
2. セットの保存機能（アカウント機能）
3. 商品詳細ページ
4. ソート機能の拡充

### Phase 3: 最適化

1. パフォーマンス最適化
2. SEO 対策
3. アナリティクス導入
4. ユーザーフィードバック機能

---

## 8. 課題・検討事項

### 8.1 データ取得

- [ ] Amazon Product Advertising API の利用可否
- [ ] レビューデータの取得方法
- [ ] 商品データの更新頻度
- [ ] スクレイピングの利用可否（利用規約確認）

### 8.2 アフィリエイト

- [ ] Amazon アソシエイトプログラムへの登録
- [ ] アフィリエイトリンクの生成方法
- [ ] 収益化の仕組み

### 8.3 法的・倫理的

- [ ] 利用規約の作成
- [ ] プライバシーポリシーの作成
- [ ] データ利用に関する規約遵守

### 8.4 技術的

- [ ] 商品データの初期投入方法
- [ ] データ更新の自動化
- [ ] キャッシュ戦略

---

## 9. 次のステップ

1. **要件の確認・調整**: このドキュメントの内容を確認し、追加・修正が必要な点を洗い出す
2. **技術スタックの決定**: 使用する技術を確定
3. **データソースの調査**: Amazon API の利用可能性を調査
4. **プロトタイプ設計**: UI/UX のワイヤーフレーム作成
5. **開発環境のセットアップ**: プロジェクトの初期化

---

## 10. 質問・確認事項

### 10.1 機能について

- [ ] ユーザーアカウント機能は必要ですか？（セットの保存など）→ 今の所必要なし。
- [ ] 商品の比較機能は必要ですか？→ 今の所必要なし
- [ ] お気に入り機能は必要ですか？→ 今の所必要なし

### 10.2 デザインについて

- [ ] 特定のデザインシステムやブランドカラーはありますか？→ デザインの規則に従った配色やデザイン
- [ ] 参考にしたいサイトはありますか？→ 特にありませんが、調査していただけると助かります。

### 10.3 データについて

- [ ] 商品データはどのように取得予定ですか？→ まずは amazon(mvp の Phase 1)。のちに楽天なども追加予定。
- [ ] 初期データは手動で投入しますか？→ それは厳しいと思います。

### 10.4 スコープについて

- [ ] MVP で必須の機能はどれですか？→ MVP Phase 1 の項目です。まずはこのフェーズでリリースするのはどうでしょうか。
- [ ] 優先度の低い機能はありますか？→ MVP Phase 2 以降です。

### 10.5 技術スタックについて

- [ ] golang を使用するとどうなるでしょうか。また、nextjs との比較および今回のプロジェクトにおける最適案を一緒に検討しましょう

---

## 11. 技術スタック比較分析

### 11.1 Next.js vs Golang の比較

#### 11.1.1 Next.js（推奨）

**メリット:**

- **フルスタック開発**: フロントエンドとバックエンドを同じプロジェクトで開発可能（API Routes）
- **開発速度**: React エコシステムが豊富で、UI コンポーネントライブラリが充実
- **SEO 対応**: SSR（Server-Side Rendering）と SSG（Static Site Generation）が標準装備
- **デプロイが簡単**: Vercel へのデプロイが非常に簡単（GitHub 連携で自動デプロイ）
- **ホットリロード**: 開発時のフィードバックが即座に反映
- **型安全性**: TypeScript との統合が優秀
- **学習コスト**: React エコシステムの知識がそのまま活用できる

**デメリット:**

- **パフォーマンス**: 高負荷な API 処理には Golang より劣る可能性
- **メモリ使用量**: Node.js ベースのため、メモリ消費がやや多い

**このプロジェクトでの適用:**

- ✅ 商品一覧表示、検索機能などの CRUD 操作に最適
- ✅ セット作成機能の状態管理が React で自然に実装できる
- ✅ レスポンシブデザインの実装が容易
- ✅ MVP の迅速な開発に適している

#### 11.1.2 Golang

**メリット:**

- **パフォーマンス**: 非常に高速で、高負荷な処理に優れている
- **並行処理**: Goroutine による並行処理が強力
- **メモリ効率**: メモリ使用量が少ない
- **型安全性**: コンパイル時にエラーを検出
- **シンプルな構文**: 学習しやすい言語設計

**デメリット:**

- **フロントエンド開発**: 別途 React/Vue などのフロントエンドフレームワークが必要
- **開発速度**: UI コンポーネントの開発に時間がかかる
- **エコシステム**: Web 開発向けのライブラリが Next.js より少ない
- **デプロイ**: フロントエンドとバックエンドを別々にデプロイする必要がある

**このプロジェクトでの適用:**

- ⚠️ 高負荷な商品検索エンジンが必要な場合に有効
- ⚠️ フロントエンドは別途 React/Next.js が必要
- ⚠️ MVP 段階では開発速度が遅くなる可能性

#### 11.1.3 ハイブリッド構成（Golang + Next.js）

**構成:**

- **バックエンド API**: Golang（商品検索、データ処理）
- **フロントエンド**: Next.js（UI、セット作成機能）

**メリット:**

- パフォーマンスと開発速度の両立
- スケーラビリティの向上

**デメリット:**

- 開発・運用の複雑さが増す
- MVP 段階では過剰な構成

### 11.2 推奨技術スタック（このプロジェクト向け）

#### 推奨案: Next.js（フルスタック）

**理由:**

1. **MVP の迅速な開発**: Phase 1 の機能を最短で実装可能
2. **フロントエンドとバックエンドの統合**: 同じプロジェクトで管理でき、開発効率が高い
3. **SEO 対応**: 商品ページの SEO が重要（将来的に検索流入を期待）
4. **デプロイの簡単さ**: Vercel へのデプロイが非常に簡単
5. **拡張性**: Phase 2 以降の機能追加も容易

**技術スタック詳細:**

```
フロントエンド + バックエンド:
- Next.js 14+ (App Router)
- TypeScript
- Tailwind CSS
- Zustand (状態管理)
- shadcn/ui (UI コンポーネント)

データベース:
- PostgreSQL (Supabase または Railway)
- Prisma (ORM)

外部サービス:
- Amazon Product Advertising API
- Vercel (デプロイ)
```

#### 代替案: Golang + Next.js（将来の拡張時）

**適用タイミング:**

- Phase 2 以降で高負荷が予想される場合
- 商品データが数万件を超える場合
- 複雑な検索アルゴリズムが必要になった場合

**構成:**

```
バックエンド API:
- Golang (Gin または Echo フレームワーク)
- PostgreSQL
- GORM (ORM)

フロントエンド:
- Next.js
- TypeScript
- Tailwind CSS
```

### 11.3 結論

**MVP（Phase 1）では Next.js を推奨**

- 開発速度とコスト効率を最優先
- フルスタックで迅速なプロトタイピングが可能
- 必要に応じて Phase 2 以降で Golang を導入可能

**Golang を検討するタイミング:**

- 商品データが 10,000 件を超える
- 同時アクセス数が 1,000 を超える
- 複雑な検索・マッチングアルゴリズムが必要
- API レスポンス時間が 100ms 以下を要求される

---

## 12. データ取得方法の検討

### 12.1 初期データ取得の課題

**課題:**

- 手動でのデータ投入は現実的ではない
- 14 カテゴリ × 複数商品 = 数百〜数千件のデータが必要
- 商品情報（価格、レビュー、画像）の更新が必要

### 12.2 データ取得方法の選択肢

#### 12.2.1 Amazon Product Advertising API（推奨）

**メリット:**

- 公式 API のため、利用規約に準拠
- 商品情報、価格、レビュー、画像を取得可能
- アフィリエイトリンクの生成が容易

**デメリット:**

- API 利用には条件がある（月間売上など）
- リクエスト制限がある
- 日本では利用条件が厳しい可能性

**実装方法:**

1. 初期データ取得: スクリプトで API を呼び出し、データベースに保存
2. 定期更新: バッチ処理で価格・在庫情報を更新

#### 12.2.2 スクレイピング（補助的）

**注意点:**

- Amazon の利用規約を確認（スクレイピングが禁止されている可能性）
- robots.txt の確認
- レート制限の遵守
- 法的リスクの検討

**実装方法（規約遵守の場合）:**

- レート制限を設ける（1 リクエスト/秒など）
- User-Agent の適切な設定
- エラーハンドリングの実装

#### 12.2.3 ハイブリッド方式（推奨）

**構成:**

1. **初期データ取得**: スクレイピングまたは手動でサンプルデータを投入（MVP 用）
2. **本番データ**: Amazon Product Advertising API で取得
3. **定期更新**: API またはスクレイピングで価格・在庫を更新

**MVP 段階での実装:**

```
Phase 1:
- サンプルデータ（各カテゴリ 10-20 件）を手動またはスクレイピングで取得
- データベースに保存
- 基本的な検索・表示機能を実装

Phase 2:
- Amazon Product Advertising API の利用申請
- API 経由でのデータ取得・更新機能を実装
- データ更新の自動化
```

### 12.3 データ構造の最適化

**検索パフォーマンス向上:**

- 商品の属性（色、スタイル、素材）をインデックス化
- 全文検索対応（PostgreSQL の Full-Text Search または Elasticsearch）
- キャッシュ戦略（Redis など）

---

## 13. 参考サイト調査

### 13.1 調査対象サイト（提案）

以下のようなサイトを参考に UI/UX を検討することを推奨します:

1. **商品一覧・検索機能**

   - Amazon.co.jp（商品カードデザイン）
   - 楽天市場（フィルター機能）
   - IKEA（カテゴリ別表示）

2. **セット作成機能**

   - カスタム PC ビルダー（パーツ選択 UI）
   - 家具セット作成サービス

3. **デザイン参考**
   - Dribbble（e-commerce デザイン）
   - Behance（商品一覧ページデザイン）

### 13.2 デザイン原則

- **ミニマルデザイン**: 白を基調とした配色
- **商品画像重視**: 大きな画像で商品を際立たせる
- **直感的な操作**: セット作成が簡単にできる UI
- **レスポンシブ**: モバイルでも使いやすい設計
